tracks = ['spotify:track:7b71WsDLb8gG0cSyDTFAEW', 'spotify:track:4B4zDmbHdkXZ1wUJv1yKFy', 'spotify:track:3cySlItpiPiIAzU3NyHCJf', 'spotify:track:3W3KtDwAIg3mAruSpnfG3Q', 'spotify:track:6K8qKeWo5MsFED7wCR6Kop', 'spotify:track:6HFbq7cewJ7rPiffV0ciil', 'spotify:track:2CAK2t1reUgPK6OMgAMURB', 'spotify:track:6PtXobrqImYfnpIxNsJApa', 'spotify:track:2wqaekenSQZm7hxQOYt8oE', 'spotify:track:5Sf3GyLEAzJXxZ5mbCPXTu', 'spotify:track:0TVV2gFROJaB3kIZyCUvIY', 'spotify:track:3U4isOIWM3VvDubwSI3y7a', 'spotify:track:5b88tNINg4Q4nrRbrCXUmg', 'spotify:track:3tCwjWLicbjsMCvXhN0WOE', 'spotify:track:4J8WVHRtXM6SMgsF7qohXy', 'spotify:track:2Dz8KeCYs9awlwUJStJlmh', 'spotify:track:4kgsK0fftHtg9gZOzkU5T2', 'spotify:track:1BltsyC5W3SAABdxyrDXwi', 'spotify:track:67awxiNHNyjMXhVgsHuIrs', 'spotify:track:27jdUE1EYDSXZqhjuNxLem', 'spotify:track:1huvTbEYtgltjQRXzrNKGi', 'spotify:track:4pn0G7yHNfTgRYRWca8gYA', 'spotify:track:0N6Bxsif1tT4vHz8tnkjzP', 'spotify:track:2Oehrcv4Kov0SuIgWyQY9e', 'spotify:track:1KqlVt63Q4bl1VdSlymr5C', 'spotify:track:3D4QFgYa3P9P0gjmv4eX6I', 'spotify:track:5ymtzcwlS4rLXJ2PMlSNPr', 'spotify:track:3cHyrEgdyYRjgJKSOiOtcS', 'spotify:track:5j9iuo3tMmQIfnEEQOOjxh', 'spotify:track:519uJbE3zyKLlToVA65PrP', 'spotify:track:1iXBApi39l5r6lJj9WEXXS', 'spotify:track:3gbBpTdY8lnQwqxNCcf795', 'spotify:track:1mzGywacjpeik00PVLBPpF', 'spotify:track:5pY3ovFxbvAg7reGZjJQSp', 'spotify:track:0tJGzJjUVlEsn8s3Mn32Jb', 'spotify:track:2KlArcPWLSRhD5JWCxqwHh', 'spotify:track:1FsH6OZCKLWbBgqj8JcCvO', 'spotify:track:6DcDdDevI94Dh4vc5anXBE', 'spotify:track:3G6hD9B2ZHOsgf4WfNu7X1', 'spotify:track:0BhZWr9gPZNlVdWWigvYA9', 'spotify:track:57ef886Y0RQDGLm2jvmYEq', 'spotify:track:6g1NlCpW7fgqDnWbCCDrHl', 'spotify:track:0idc0XRnLRovVqpWnGQ6hC', 'spotify:track:6jizk5lOUnfpaZXYMdfeC6', 'spotify:track:4G8gkOterJn0Ywt6uhqbhp', 'spotify:track:2rJojRundKuKFgbvmCAYva', 'spotify:track:7DFNE7NO0raLIUbgzY2rzm', 'spotify:track:6NGet2NFndj4XvpjH9iMvb', 'spotify:track:1A2UmLDZzDmpdzUjEkCc3z', 'spotify:track:5fnA9mkIfScSqHIpeDyvck', 'spotify:track:5l3CML2OnzfNs5RfVgbcLt', 'spotify:track:4r8hRPbidDIoDPphxi78aY', 'spotify:track:72lvNqggmcOnS4C8XxZwuj', 'spotify:track:6jdOi5U5LBzQrc4c1VT983', 'spotify:track:3zKST4nk4QJE77oLjUZ0Ng', 'spotify:track:3bidbhpOYeV4knp8AIu8Xn', 'spotify:track:015IsLQFXbEm0f541N2qoX', 'spotify:track:2dLLR6qlu5UJ5gk0dKz0h3', 'spotify:track:0xCA70t1ZA4fa9UOE0lIJm', 'spotify:track:3rq5w4bQGigXOfdN30ATJt', 'spotify:track:1HNkqx9Ahdgi1Ixy2xkKkL', 'spotify:track:0zkiQH567SDLqfWNBaU3hv', 'spotify:track:3DmW6y7wTEYHJZlLo1r6XJ', 'spotify:track:5TvFfDlVoUWZvfqrhTJzD7', 'spotify:track:0ktV2JoOsoTGURzKaZnjJL', 'spotify:track:0qcr5FMsEO85NAQjrlDRKo', 'spotify:track:13qqdlSeF8FcxsRyapDMZ0', 'spotify:track:11SynawYlFYwzk3k9VARLV', 'spotify:track:48gsLPdOUEDjr7P8Wvykne', 'spotify:track:5U8hKxSaDXB8cVeLFQjvwx', 'spotify:track:0xMd5bcWTbyXS7wPrBtZA6', 'spotify:track:3wPPWcVuinAU7dXcJXtCID', 'spotify:track:0Rz1KXsP4bhGxs0ffySSSn', 'spotify:track:4Uc6BcPeBKfZUlX6jhumGv', 'spotify:track:7qfwcqfGOkQYtzjF4UzJHM', 'spotify:track:2Vogx6NbF6o4bfLhzKmo3O', 'spotify:track:0xIVvRmjztR1AwuHrkhH41', 'spotify:track:34gCuhDGsG4bRPIf9bb02f', 'spotify:track:0D2TtUbiX4QszhgMuye71Z', 'spotify:track:5EmCpD8tUj78VW3kgaEjME', 'spotify:track:1fzJyTCKeZuTSLByCsLRHl', 'spotify:track:0ZR9NFol0hcgLSVJoQmREl', 'spotify:track:6D5pfooPP6hi99RaXjkDsP', 'spotify:track:3qZkpG7RW81clweFyefCe2', 'spotify:track:2N8F9mupXs9oyCLeerRfCw', 'spotify:track:3bDGwl0X3EjQmIyFD1uif5', 'spotify:track:5v4sZRuvWDcisoOk1PFv6T', 'spotify:track:4eLSCSELtKxZwXnFbNLXT5', 'spotify:track:2FvE1VYiztTWlj3ivgMAeY', 'spotify:track:3zdv56EdfZi0ydbAZqbQ3M', 'spotify:track:2FiceoWDJ67rrmb5tGBpgE', 'spotify:track:3GKSfF6c3Rv3a1knSjxnXa', 'spotify:track:0cJLYpRTqODzv9SiQukE4Z', 'spotify:track:1Y7497MCCpZ19EuwIaqoZ0', 'spotify:track:2ia7iiEtpiOL2ZVuWxBZGB', 'spotify:track:2x4UdnjXPMMwjZtDTqpEjT', 'spotify:track:6zlOUIqcU6juXFww9UNpJK', 'spotify:track:5hTx6e0H4tQHiPyx5AuuwS', 'spotify:track:2Foc5Q5nqNiosCNqttzHof', 'spotify:track:1j8z4TTjJ1YOdoFEDwJTQa']
imgs = []

update_cover = ->
  rand = _.random(imgs.length - 20)
  rand2 = _.random(imgs.length - 1)
  li_uid = imgs[rand].uid
  li_img = imgs[rand2].img
  img = new Image
  img.src = li_img
  img.width = 200
  img.height = 200
  $("##{li_uid} img").animate { opacity: 0 }, 1000, ->
    $("##{li_uid}").html img
    $("##{li_uid} img").css 'opacity', '0'
    $("##{li_uid} img").animate { opacity: 1 }, 1000


tracks.forEach (el) ->
  $.ajax
    url: "https://embed.spotify.com/oembed/?url=#{el}&callback=callme"
    type: 'GET'
    crossDomain: true
    dataType: 'jsonp'

    success: (data) ->
      img = new Image
      img.src = data.thumbnail_url
      img.width = 200
      img.height = 200
      randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26))
      uid = randLetter + Date.now()
      $('.background ul').append '<li id=\'' + uid + '\'></li>'
      $('.background ul li:last-child').append img
      imgs.push
        img: img.src
        uid: uid

    error: (err) ->
      console.log err

setInterval update_cover, 500
